<div class="shop-banner">
    <div class="title">SHOPPING CART</div>
</div>
<div class="cart-container">
    <div class="msg" *ngIf="msg">{{msg}}</div>
    <table>
        <tr class="table-ths">
            <th>product</th>
            <th>color</th>
            <th>size</th>
            <th>qty</th>
            <th>price</th>
            <th class="subtotal">Subtotal</th>
        </tr>
        <tr *ngFor="let item of products[0];index as i">
            <td>
                <div class="info">
                    <span class="delete-btn"
                        (click)="removeFromCart(item.product.productId,item.product.size,item.product.color)">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em"
                            viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                            <path
                                d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z" />
                        </svg>
                    </span>
                    <span class="photo">
                        <img [src]="Foldername+item.product.img.filename" alt=" product photo">
                    </span>
                    <span class="name">{{item.product.name}}</span>
                </div>
            </td>
            <td>
                <!-- when the color changes, we call the function changeSizes so we can change the options in the other
                select containing the sizes -->
                <select #Selectedcolor
                    (change)="changeSizes(Selectedcolor.value,i,SelectedSize.value,item.product.productId,qty.value)">
                    <option *ngFor="let color of item.description" [value]="color[0]"
                        [selected]="color[0]==item.product.color">
                        {{color[0]}}
                    </option>
                </select>
            </td>
            <td>
                <!-- we call the sizes function every time the selected color changes which leads to a rerender on this
                select -->
                <select #SelectedSize
                    (change)="save(Selectedcolor.value,SelectedSize.value,item.product.productId,qty.value)">
                    <option *ngFor="let size of changeSizes(Selectedcolor.value,i,'','','')"
                        [selected]="size==item.product.size">
                        {{size}}
                    </option>
                </select>
            </td>
            <td><input #qty type="number" min="1" class="qty" [value]="item.product.quantity"
                    (change)="calculatesubtotal(qty.value ,item.price,Selectedcolor.value,SelectedSize.value,item.product.productId)">
            </td>
            <td>${{item.product.price}}</td>
            <td class="subtotal">{{calculatesubtotal(qty.value ,item.product.price,'','','')}}</td>
        </tr>
    </table>
    <div class="total-cost">
        Total Cost: {{products[1]}}
    </div>
</div>